(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bf4ecd50"],{"6e80":function(e,r,t){},"803e":function(e,r,t){"use strict";var s=t("6e80"),n=t.n(s);n.a},b640:function(e,r,t){e.exports=t.p+"img/logo.78c810f6.jpg"},bf93:function(e,r,t){e.exports=t.p+"img/us_bg.d9fdf6bb.jpg"},fa67:function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-container",{staticClass:"conbox"},[t("el-header",{attrs:{height:"120px"}},[t("loginheader")],1),t("el-main",{staticClass:"main"},[t("hr",{staticClass:"line"}),t("div",{staticClass:"block"},[t("el-image",{attrs:{src:e.src}})],1),t("div",{staticClass:"ulogin"},[t("el-tabs",{staticClass:"tabs",attrs:{type:"card"},model:{value:e.activeName,callback:function(r){e.activeName=r},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"登陆",name:"login"}},[t("el-card",{staticClass:"box-card",attrs:{shadow:"always"}},[t("el-form",{ref:"loginForm",staticClass:"loginForm",attrs:{model:e.loginForm,rules:e.rules}},[t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{staticClass:"input",attrs:{"prefix-icon":"el-icon-user",placeholder:"用户名/邮箱/手机号"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.login("loginForm")}},model:{value:e.loginForm.username,callback:function(r){e.$set(e.loginForm,"username",r)},expression:"loginForm.username"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{staticClass:"input",attrs:{type:"password",placeholder:"密码","prefix-icon":"el-icon-key"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.login("loginForm")}},model:{value:e.loginForm.password,callback:function(r){e.$set(e.loginForm,"password",r)},expression:"loginForm.password"}})],1),t("div",{staticClass:"login-btn"},[t("el-button",{attrs:{type:"primary",plain:!0,round:""},on:{click:function(r){return e.login("loginForm")}}},[e._v("登录")])],1)],1)],1)],1),t("el-tab-pane",{attrs:{label:"注册",name:"regist"}},[t("el-card",{staticClass:"box-card",attrs:{shadow:"always"}},[t("el-form",{ref:"registForm",staticClass:"registForm",attrs:{model:e.registForm,rules:e.rules}},[t("el-form-item",{attrs:{prop:"username2"}},[t("el-input",{staticClass:"input",attrs:{placeholder:"用户名","prefix-icon":"el-icon-user"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.regist("loginForm")}},model:{value:e.registForm.username2,callback:function(r){e.$set(e.registForm,"username2",r)},expression:"registForm.username2"}})],1),t("el-form-item",{attrs:{prop:"password2"}},[t("el-input",{staticClass:"input",attrs:{placeholder:"密码",type:"password","prefix-icon":"el-icon-key"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.regist("loginForm")}},model:{value:e.registForm.password2,callback:function(r){e.$set(e.registForm,"password2",r)},expression:"registForm.password2"}})],1),t("el-form-item",{attrs:{prop:"password3"}},[t("el-input",{staticClass:"input",attrs:{placeholder:"确认密码",type:"password","prefix-icon":"el-icon-key"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.regist("loginForm")}},model:{value:e.registForm.password3,callback:function(r){e.$set(e.registForm,"password3",r)},expression:"registForm.password3"}})],1),t("div",{staticClass:"login-btn"},[t("el-button",{attrs:{type:"primary",round:""},on:{click:function(r){return e.regist("registForm")}}},[e._v("注册")])],1)],1)],1)],1)],1)],1)])],1)},n=[],o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("div",{staticClass:"grid-content bg-purple-dark"},[t("el-image",{staticStyle:{width:"200px",height:"100px","padding-top":"5px"},attrs:{src:e.url,fit:"contain"},on:{click:function(r){return e.skip()}}})],1)])],1)},i=[],a=t("b640"),l=t.n(a),u={data:function(){return{url:l.a}},methods:{skip:function(){this.$router.push({path:"/index"})}}},c=u,p=t("2877"),d=Object(p["a"])(c,o,i,!1,null,null,null),m=d.exports,g=t("bf93"),f=t.n(g),w={components:{loginheader:m},data:function(){var e=this,r=function(r,t,s){var n=JSON.stringify({userinfoName:e.registForm.username2});e.$axios.post("/user/duplicate",n).then((function(r){"error"===r.data&&(e.duplicate=!0)})).catch((function(e){return console.log("err",e),e})),""===t?s(new Error("请输入用户名")):e.duplicate?(s(new Error("用户名重复")),e.duplicate=!1):(""!==e.registForm.password3&&e.$refs.registForm.validateField("password3"),s())},t=function(r,t,s){""===t?s(new Error("请输入密码")):(""!==e.registForm.password3&&e.$refs.registForm.validateField("password3"),s())},s=function(r,t,s){""===t?s(new Error("请再次输入密码")):t!==e.registForm.password2?s(new Error("两次输入密码不一致!")):s()};return{src:f.a,activeName:"login",duplicate:!1,loginForm:{username:"",password:""},registForm:{username2:"",password2:"",password3:""},rules:{username:[{required:!0,message:"请输入用户名/邮箱/手机号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],username2:[{validator:r,trigger:"blur"}],password2:[{validator:t,trigger:"blur"}],password3:[{validator:s,trigger:"blur"}]}}},methods:{login:function(e){var r=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var t=JSON.stringify({userinfoName:r.loginForm.username,userinfoPwd:r.loginForm.password});r.$axios.post("/user/ulogin",t).then((function(e){e.data?(r.$message({message:"登陆成功",type:"success"}),sessionStorage.setItem("userId",e.data.userinfoId),r.$router.push({path:"/index"})):r.$alert("用户名或密码错误","提示",{confirmButtonText:"确定",type:"warning"})})).catch((function(e){return console.log("err",e),e}))}))},regist:function(e){var r=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var t=JSON.stringify({userinfoName:r.registForm.username2,userinfoPwd:r.registForm.password2});r.$axios.post("/user/register",t).then((function(e){if("success"===e.data){r.$message({message:"注册成功",type:"success"});var t=JSON.stringify({userinfoName:r.registForm.username2});r.$axios.post("/user/getuserid",t).then((function(e){e.data&&(sessionStorage.setItem("userId",e.data.userinfoId),r.$router.push({path:"/index"}))})).catch((function(e){return console.log("err",e),e}))}else"error"===e.data&&r.$alert("用户名或密码错误","提示",{confirmButtonText:"确定",type:"warning"})})).catch((function(e){return console.log("err",e),e}))}))}}},y=w,k=(t("803e"),Object(p["a"])(y,s,n,!1,null,null,null));r["default"]=k.exports}}]);
//# sourceMappingURL=chunk-bf4ecd50.b73b8238.js.map