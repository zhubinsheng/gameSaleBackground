(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45b2f62e"],{"4e09":function(t,e,o){"use strict";var a=o("dbc1"),n=o.n(a);n.a},"587a":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-container",{staticStyle:{height:"960px",border:"1px solid #eee"}},[o("adbar"),o("el-container",[o("el-header",{staticStyle:{"text-align":"right","font-size":"12px"}},[o("adheader")],1),o("el-main",{staticStyle:{margin:"0px",padding:"0px"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData.slice((t.currpage-1)*t.pagesize,t.currpage*t.pagesize),"header-cell-style":{background:"#F4F4F4",color:"#3C3C3C"},id:"tableData"}},[o("el-table-column",{attrs:{prop:"postId",label:"帖子ID",width:"80px"}}),o("el-table-column",{attrs:{prop:"postTitle",label:"帖子标题","show-overflow-tooltip":!0}}),o("el-table-column",{attrs:{prop:"postContent",label:"帖子内容","show-overflow-tooltip":!0}}),o("el-table-column",{attrs:{prop:"postTime",label:"发布时间",formatter:t.setDate,"show-overflow-tooltip":!0}}),o("el-table-column",{attrs:{prop:"postThumbs",label:"点赞数"}}),o("el-table-column",{attrs:{prop:"postUserid",label:"用户ID"}}),o("el-table-column",{attrs:{prop:"postUsername",label:"用户名"}}),o("el-table-column",{attrs:{prop:"postCommons",label:"评论数"}}),o("el-table-column",{attrs:{align:"right",width:"200px;"},scopedSlots:t._u([{key:"header",fn:function(e){return[o("el-input",{attrs:{size:"mini",placeholder:"输入关键字"},nativeOn:{keyup:function(o){return!o.type.indexOf("key")&&t._k(o.keyCode,"enter",13,o.key,"Enter")?null:t.select(e.$index,e.row)}},model:{value:t.sel,callback:function(e){t.sel=e},expression:"sel"}})]}},{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){t.handleSee(e.$index,e.row),t.dialogFormVisible=!0}}},[t._v("查看内容")]),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),o("el-button",{staticStyle:{float:"right","margin-top":"20px"},attrs:{size:"mini",type:"success",plain:""},on:{click:t.exportExcel}},[t._v("点击Excel")]),o("el-pagination",{staticStyle:{"padding-top":"20px"},attrs:{background:"",layout:"total,sizes,prev, pager, next,jumper",total:t.tableData.length,"page-sizes":[5,10,20],"page-size":t.pagesize,"current-page":t.currpage},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1),o("el-dialog",{attrs:{title:"帖子内容",center:t.bol,visible:t.dialogFormVisible,width:"500px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("span",{staticClass:"contentBox"},[t._v(t._s(t.postContent2))])])],1)},n=[],l=o("6f30"),s=o("c1df"),i=o.n(s),r=o("8385"),c=o("21a6"),p=o.n(c),u=o("1146"),d=o.n(u),h={inject:["reload"],components:{adbar:l["a"],adheader:r["a"]},data:function(){return{adminName:"",dialogFormVisible:!1,postContent2:"",bol:!0,currpagePage1:1,pagesize:10,currpage:1,sel:"",tableData:[{postId:"",postTitle:"",postContent:"",postTime:"",postThumbs:"",postUserid:"",postUsername:"",postCommons:""}]}},created:function(){this.loadData(),this.adminName=sessionStorage.getItem("adminName")},mounted:function(){var t=this,e=setInterval((function(){t.loadData()}),3e3);this.$once("hook:beforeDestroy",(function(){clearInterval(e)}))},methods:{handleSizeChange:function(t){this.pagesize=t},handleCurrentChange:function(t){this.currpage=t},select:function(t,e){var o=this,a=JSON.stringify({postTitle:this.sel});this.$axios.post("/post/showlike",a).then((function(t){t&&(o.tableData=t.data)})).catch((function(t){return console.log("err",t),t}))},handleSee:function(t,e){this.postContent2=e.postContent,console.log(this.postContent2)},handleDelete:function(t,e){var o=this,a=JSON.stringify({postId:e.postId});this.$axios.post("/post/deletepost",a).then((function(t){"success"===t.data?(o.reload(),console.log("删除了"+o.postId)):"error"===t.data&&o.$alert("发生了意料之外的错误","提示",{confirmButtonText:"确定",type:"warning"})})).catch((function(t){return o.$alert("发生了意料之外的错误","提示",{confirmButtonText:"确定",type:"warning"}),console.log("err",t),t}))},loadData:function(){var t=this;this.$axios.post("/post/showallpost").then((function(e){e&&200===e.status&&(t.tableData=e.data)})).catch((function(t){return console.log("err",t),t}))},setDate:function(t,e){var o=t[e.property];return void 0===o?"":i()(o).format("YYYY-MM-DD HH:mm:ss")},exportExcel:function(){var t=d.a.utils.table_to_book(document.querySelector("#tableData")),e=d.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{p.a.saveAs(new Blob([e],{type:"application/octet-stream"}),"sheetjs.xlsx")}catch(o){"undefined"!==typeof console&&console.log(o,e)}return e}}},b=h,g=(o("4e09"),o("2877")),f=Object(g["a"])(b,a,n,!1,null,null,null);e["default"]=f.exports},dbc1:function(t,e,o){}}]);
//# sourceMappingURL=chunk-45b2f62e.131f39ee.js.map