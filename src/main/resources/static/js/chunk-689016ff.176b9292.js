(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-689016ff"],{"0641":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-container",{staticStyle:{height:"960px",border:"1px solid #eee"}},[r("adbar"),r("el-container",[r("el-header",{staticStyle:{"text-align":"right","font-size":"12px"}},[r("adheader")],1),r("el-main",{staticClass:"main"},[r("el-form",{ref:"addForm",staticClass:"addForm",attrs:{model:e.addForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"游戏名",prop:"name",required:""}},[r("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),r("el-form-item",{attrs:{label:"价格",prop:"price"}},[r("el-input",{model:{value:e.addForm.price,callback:function(t){e.$set(e.addForm,"price",t)},expression:"addForm.price"}})],1),r("el-form-item",{attrs:{label:"描述",prop:"desc"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.addForm.desc,callback:function(t){e.$set(e.addForm,"desc",t)},expression:"addForm.desc"}})],1),r("el-form-item",{attrs:{label:"是否打折",prop:"promotion"}},[r("el-switch",{attrs:{"active-text":"打折","inactive-text":"不打折"},model:{value:e.addForm.promotion,callback:function(t){e.$set(e.addForm,"promotion",t)},expression:"addForm.promotion"}})],1),r("transition",{attrs:{name:"el-fade-in-linear"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:this.addForm.promotion,expression:"this.addForm.promotion"}]},[r("el-form-item",{attrs:{label:"折扣",prop:"discount"}},[r("el-input",{model:{value:e.addForm.discount,callback:function(t){e.$set(e.addForm,"discount",t)},expression:"addForm.discount"}})],1)],1)]),r("el-form-item",{attrs:{label:"分类",prop:"character"}},[r("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.addForm.character,callback:function(t){e.$set(e.addForm,"character",t)},expression:"addForm.character"}},e._l(e.sort,(function(e,t){return r("el-option",{key:t,attrs:{label:e.sortName,value:e.sortName}})})),1),r("span",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialog=!0,e.sortname=""}}},[e._v("分类")])],1)],1),r("el-form-item",{attrs:{label:"照片",required:""}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","http-request":e.httpRequest,"show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[e.img?r("img",{staticClass:"avatar",attrs:{src:e.img}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"下载链接",prop:"down"}},[r("el-input",{model:{value:e.addForm.down,callback:function(t){e.$set(e.addForm,"down",t)},expression:"addForm.down"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("addForm")}}},[e._v("添加商品")]),r("el-button",{on:{click:function(t){return e.resetForm("addForm")}}},[e._v("重置数据")])],1)],1)],1)],1)],1),r("el-dialog",{attrs:{title:"添加分类",width:"30%",visible:e.dialog},on:{"update:visible":function(t){e.dialog=t}}},[r("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入分类",autocomplete:"off"},model:{value:e.sortname,callback:function(t){e.sortname=t},expression:"sortname"}}),r("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:function(t){return e.addscort()}}},[e._v("添 加")]),r("el-table",{attrs:{data:e.sort.slice((e.currpage-1)*e.pagesize,e.currpage*e.pagesize)}},[r("el-table-column",{attrs:{property:"sortName",label:"类别名"}}),r("el-table-column",{attrs:{property:"sortCount",label:"游戏数量"}}),r("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(t.$index,t.row)}},slot:"reference"},[e._v("删除")])]}}])})],1),r("el-pagination",{staticStyle:{"padding-top":"20px"},attrs:{background:"",layout:"total, prev, pager, next,jumper",total:e.sort.length,"page-size":e.pagesize,"current-page":e.currpage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},o=[],n=(r("4e82"),r("b0c0"),r("6f30")),i=r("8385"),s={inject:["reload"],components:{adbar:n["a"],adheader:i["a"]},data:function(){var e=this,t=function(t,r,a){var o=JSON.stringify({gameName:e.addForm.name});e.$axios.post("/game/duplicate",o).then((function(t){"error"===t.data?e.duplicate=!0:"success"===t.data&&(e.duplicate=!1)})).catch((function(e){return console.log("err",e),e})),""===r?a(new Error("请输入游戏名名")):e.duplicate?(a(new Error("用户名重复")),e.duplicate=!1):a()};return{adminName:"",img:"",duplicate:"",dialog:!1,sortname:"",currpagePage1:1,pagesize:4,currpage:1,addForm:{name:"",price:"",desc:"",promotion:!1,discount:"1",character:"",down:"",sale:"0"},sort:[{sortId:"",sortName:"",sortCount:""}],rules:{name:[{validator:t,trigger:"blur"}],price:[{required:!0,message:"请输入游戏价格",trigger:"blur"}],desc:[{required:!0,message:"请输入游戏描述",trigger:"blur"}],character:[{required:!0,message:"请选择分类",trigger:"change"}],down:[{required:!0,message:"请输入下载链接",trigger:"blur"}]}}},created:function(){this.loadSort()},methods:{loadSort:function(){var e=this;this.$axios.post("/sort/showsort").then((function(t){t&&(e.sort=t.data)})).catch((function(e){return console.log("err",e),e}))},handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currpage=e},httpRequest:function(e){var t=this,r=new FileReader,a=e.file;r.readAsDataURL(a),r.onload=function(){console.log("file 转 base64结果："+r.result),t.img=r.result}},submitForm:function(e){var t=this;!1===this.addForm.promotion&&(this.addForm.discount=1),this.img?this.$refs[e].validate((function(e){if(e){var r=JSON.stringify({gameName:t.addForm.name,gamePrice:t.addForm.price,gameDescription:t.addForm.desc,gameDiscount:t.addForm.discount,gamePromotion:t.addForm.promotion,gameCharacter:t.addForm.character,gameImg:t.img,gameDown:t.addForm.down,gameSale:t.addForm.sale});t.$axios.post("/game/insertgame",r).then((function(e){"success"===e.data?t.reload():"error"===e.data&&t.$alert("发生了意料之外的错误","提示",{confirmButtonText:"确定",type:"warning"})})).catch((function(e){return console.log("err",e),e}))}})):this.$message.error("请上传图片!")},resetForm:function(e){this.$refs[e].resetFields()},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,r=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&r},addscort:function(){var e=this;if(this.sortname){var t=JSON.stringify({sortName:this.sortname,sortCount:"0"});this.$axios.post("/sort/insertsort",t).then((function(t){"success"===t.data&&(e.dialog=!1,e.reload())})).catch((function(e){return console.log("err",e),e}))}else this.$message.error("请输入分类")},handleDelete:function(e,t){var r=this;if(t.sortCount)this.$message.error("该分类还有商品，删除失败！");else{var a=JSON.stringify({sortId:t.sortId});this.$axios.post("/sort/deletesort",a).then((function(e){"success"===e.data&&(r.$message.success("删除成功"),r.reload())})).catch((function(e){return console.log("err",e),e}))}}}},l=s,c=(r("ab00"),r("2877")),d=Object(c["a"])(l,a,o,!1,null,null,null);t["default"]=d.exports},"4e82":function(e,t,r){"use strict";var a=r("23e7"),o=r("1c0b"),n=r("7b0b"),i=r("d039"),s=r("b301"),l=[].sort,c=[1,2,3],d=i((function(){c.sort(void 0)})),u=i((function(){c.sort(null)})),m=s("sort"),p=d||!u||m;a({target:"Array",proto:!0,forced:p},{sort:function(e){return void 0===e?l.call(n(this)):l.call(n(this),o(e))}})},"6f30":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[r("el-menu",{attrs:{"default-openeds":["1","2","3"],router:""}},[r("el-submenu",{attrs:{index:"1"}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-s-goods"}),e._v("商品管理 ")]),r("el-menu-item-group",[r("el-menu-item",{attrs:{index:"/ad_game"}},[e._v("商品列表")]),r("el-menu-item",{attrs:{index:"/add_game"}},[e._v("添加商品")]),r("el-menu-item",{attrs:{index:"/game_photo"}},[e._v("图表")])],1)],2),r("el-submenu",{attrs:{index:"2"}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-s-order"}),e._v("其他管理 ")]),r("el-menu-item-group",[r("el-menu-item",{attrs:{index:"/ad_post"}},[e._v("帖子列表")]),r("el-menu-item",{attrs:{index:"/ad_comment"}},[e._v("评论列表")]),r("el-menu-item",{attrs:{index:"/ad_order"}},[e._v("订单列表")])],1)],2),r("el-submenu",{attrs:{index:"3"}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-s-custom"}),e._v("用户管理 ")]),r("el-menu-item-group",[r("el-menu-item",{attrs:{index:"/ad_userinfo"}},[e._v("用户列表")]),r("el-menu-item",{attrs:{index:"/add_user"}},[e._v("添加用户")]),r("el-menu-item",{attrs:{index:"/user_photo"}},[e._v("图表")])],1)],2)],1)],1)},o=[],n={},i=n,s=(r("965c"),r("2877")),l=Object(s["a"])(i,a,o,!1,null,null,null);t["a"]=l.exports},"7bd8":function(e,t,r){},8385:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(e.adminName)+" ")]),e.adminName?r("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(t){return e.out()}}},[e._v("| 退出")]):e._e(),e.adminName?e._e():r("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(t){return e.out()}}},[e._v("登陆")])],1)},o=[],n={data:function(){return{adminName:""}},created:function(){this.adminName=sessionStorage.getItem("adminName")},methods:{out:function(){this.$router.push({path:"/ad_login"}),sessionStorage.removeItem("adminName")}}},i=n,s=r("2877"),l=Object(s["a"])(i,a,o,!1,null,null,null);t["a"]=l.exports},"965c":function(e,t,r){"use strict";var a=r("db58"),o=r.n(a);o.a},ab00:function(e,t,r){"use strict";var a=r("7bd8"),o=r.n(a);o.a},b0c0:function(e,t,r){var a=r("83ab"),o=r("9bf2").f,n=Function.prototype,i=n.toString,s=/^\s*function ([^ (]*)/,l="name";!a||l in n||o(n,l,{configurable:!0,get:function(){try{return i.call(this).match(s)[1]}catch(e){return""}}})},b301:function(e,t,r){"use strict";var a=r("d039");e.exports=function(e,t){var r=[][e];return!r||!a((function(){r.call(null,t||function(){throw 1},1)}))}},db58:function(e,t,r){}}]);
//# sourceMappingURL=chunk-689016ff.176b9292.js.map