(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fb743a1e"],{"4e82":function(e,t,a){"use strict";var o=a("23e7"),r=a("1c0b"),n=a("7b0b"),i=a("d039"),l=a("b301"),s=[].sort,c=[1,2,3],m=i((function(){c.sort(void 0)})),u=i((function(){c.sort(null)})),p=l("sort"),d=m||!u||p;o({target:"Array",proto:!0,forced:d},{sort:function(e){return void 0===e?s.call(n(this)):s.call(n(this),r(e))}})},"5a65":function(e,t,a){"use strict";var o=a("f181"),r=a.n(o);r.a},"5c9c":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{staticStyle:{height:"960px",border:"1px solid #eee"}},[a("adbar"),a("el-container",[a("el-header",{staticStyle:{"text-align":"right","font-size":"12px"}},[a("adheader")],1),a("el-main",{staticStyle:{margin:"0px",padding:"0px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currpage-1)*e.pagesize,e.currpage*e.pagesize),"header-cell-style":{background:"#F4F4F4",color:"#3C3C3C"},id:"tableData"}},[a("el-table-column",{attrs:{prop:"gameId",label:"游戏ID",width:"80px"}}),a("el-table-column",{attrs:{prop:"gameName",label:"游戏名"}}),a("el-table-column",{attrs:{prop:"gamePrice",label:"价格"}}),a("el-table-column",{attrs:{prop:"gameDescription",label:"描述","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"gameDiscount",label:"折扣"}}),a("el-table-column",{attrs:{prop:"gamePromotion",label:"是否打折",formatter:e.formatBoolean}}),a("el-table-column",{attrs:{prop:"gameCharacter",label:"分类"}}),a("el-table-column",{attrs:{prop:"gameDown",label:"下载链接","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"gameTime",label:"上架时间",formatter:e.setDate}}),a("el-table-column",{attrs:{label:"操作",align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"输入关键字"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.select(t.$index,t.row)}},model:{value:e.sel,callback:function(t){e.sel=t},expression:"sel"}})]}},{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleEdit(t.$index,t.row),e.dialogFormVisible=!0}}},[e._v("修改")]),a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}},slot:"reference"},[e._v("删除")])]}}])})],1),a("el-button",{staticStyle:{float:"right","margin-top":"20px"},attrs:{size:"mini",type:"success",plain:""},on:{click:e.exportExcel}},[e._v("点击Excel")]),a("el-pagination",{staticStyle:{"padding-top":"20px"},attrs:{background:"",layout:"total,sizes,prev, pager, next,jumper",total:e.tableData.length,"page-sizes":[5,10,20],"page-size":e.pagesize,"current-page":e.currpage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1),a("el-dialog",{attrs:{title:"修改商品",visible:e.dialogFormVisible,width:"500px",center:e.bol},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.updateForm,"label-width":e.formLabelWidth}},[a("el-form-item",{attrs:{label:"游戏名称",prop:"name2"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.updateForm.name2,callback:function(t){e.$set(e.updateForm,"name2",t)},expression:"updateForm.name2"}})],1),a("el-form-item",{attrs:{label:"价格",prop:"price"}},[a("el-input",{model:{value:e.updateForm.price2,callback:function(t){e.$set(e.updateForm,"price2",t)},expression:"updateForm.price2"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"desc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.updateForm.desc2,callback:function(t){e.$set(e.updateForm,"desc2",t)},expression:"updateForm.desc2"}})],1),a("el-form-item",{attrs:{label:"是否打折",prop:"promotion"}},[a("el-switch",{attrs:{"active-text":"打折","inactive-text":"不打折"},model:{value:e.updateForm.promotion2,callback:function(t){e.$set(e.updateForm,"promotion2",t)},expression:"updateForm.promotion2"}})],1),a("transition",{attrs:{name:"el-fade-in-linear"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:this.updateForm.promotion2,expression:"this.updateForm.promotion2"}]},[a("el-form-item",{attrs:{label:"折扣",prop:"discount"}},[a("el-input",{model:{value:e.updateForm.discount2,callback:function(t){e.$set(e.updateForm,"discount2",t)},expression:"updateForm.discount2"}})],1)],1)]),a("el-form-item",{attrs:{label:"分类"}},[a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:e.updateForm.character2,callback:function(t){e.$set(e.updateForm,"character2",t)},expression:"updateForm.character2"}},e._l(e.sort,(function(e,t){return a("el-option",{key:t,attrs:{label:e.sortName,value:e.sortName}})})),1)],1),a("el-form-item",{attrs:{label:"照片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","http-request":e.httpRequest,"show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[e.img2?a("img",{staticClass:"avatar",attrs:{src:e.img2}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"下载链接",prop:"down"}},[a("el-input",{model:{value:e.updateForm.down2,callback:function(t){e.$set(e.updateForm,"down2",t)},expression:"updateForm.down2"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("updateForm")}}},[e._v("修改商品")]),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")])],1)],1)],1)},r=[],n=(a("4e82"),a("6f30")),i=a("8385"),l=a("c1df"),s=a.n(l),c=a("21a6"),m=a.n(c),u=a("1146"),p=a.n(u),d={inject:["reload"],components:{adbar:n["a"],adheader:i["a"]},data:function(){return{dialogFormVisible:!1,formLabelWidth:"200px",bol:!0,img2:"",gameId2:"",currpagePage1:1,pagesize:10,currpage:1,sel:"",updateForm:{name2:"",price2:"",desc2:"",discount2:"",promotion2:"",character2:"",down2:""},tableData:[{gameId:"",gameName:"",gamePrice:"",gameDescription:"",gameDiscount:"",gamePromotion:"",gameCharacter:"",gameImg:"",gameDown:"",gameTime:""}],sort:[{sortId:"",sortName:""}]}},created:function(){this.loadData(),this.loadSort()},methods:{loadSort:function(){var e=this;this.$axios.post("/sort/showsort").then((function(t){t&&(e.sort=t.data)})).catch((function(e){return console.log("err",e),e}))},handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currpage=e},select:function(e,t){var a=this,o=JSON.stringify({gameName:this.sel});this.$axios.post("/game/showlike",o).then((function(e){e&&(a.tableData=e.data)})).catch((function(e){return console.log("err",e),e}))},formatBoolean:function(e,t,a){return this.gamePromotion="",this.gamePromotion=a?"是":"否",this.gamePromotion},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},httpRequest:function(e){var t=this,a=new FileReader,o=e.file;a.readAsDataURL(o),a.onload=function(){console.log("file 转 base64结果："+a.result),t.img2=a.result}},submitForm:function(e){var t=this,a=JSON.stringify({gameId:this.gameId2,gameName:this.updateForm.name2,gamePrice:this.updateForm.price2,gameDescription:this.updateForm.desc2,gameDiscount:this.updateForm.discount2,gamePromotion:this.updateForm.promotion2,gameCharacter:this.updateForm.character2,gameImg:this.img2,gameDown:this.updateForm.down2});console.log(a),this.$axios.post("/game/updategame",a).then((function(e){"success"===e.data?(console.log(a),t.dialogFormVisible=!1,t.reload()):"error"===e.data&&t.$alert("发生了意料之外的错误","提示",{confirmButtonText:"确定",type:"warning"})})).catch((function(e){return t.$alert("发生了意料之外的错误","提示",{confirmButtonText:"确定",type:"warning"}),console.log("err",e),e}))},handleEdit:function(e,t){this.gameId2=t.gameId,this.updateForm.promotion2=t.gamePromotion,this.updateForm.name2=t.gameName,this.updateForm.price2=t.gamePrice,this.updateForm.discount2=t.gameDiscount,this.updateForm.desc2=t.gameDescription,this.updateForm.character2=t.gameCharacter,this.updateForm.down2=t.gameDown,this.img2=t.gameImg,console.log(this.gameId2)},handleDelete:function(e,t){var a=this,o=JSON.stringify({gameId:t.gameId});this.$axios.post("/game/deletegame",o).then((function(e){"success"===e.data?a.reload():"error"===e.data&&a.$alert("发生了意料之外的错误","提示",{confirmButtonText:"确定",type:"warning"})})).catch((function(e){return a.$alert("发生了意料之外的错误","提示",{confirmButtonText:"确定",type:"warning"}),console.log("err",e),e}))},loadData:function(){var e=this;this.$axios.post("/game/showallgame").then((function(t){t&&200===t.status&&(e.tableData=t.data,console.log(e.total),t.data.gamePromotion?e.tableData.gamePromotion="0":e.tableData.gamePromotion="1")})).catch((function(e){return console.log("err",e),e}))},exportExcel:function(){var e=p.a.utils.table_to_book(document.querySelector("#tableData")),t=p.a.write(e,{bookType:"xlsx",bookSST:!0,type:"array"});try{m.a.saveAs(new Blob([t],{type:"application/octet-stream"}),"sheetjs.xlsx")}catch(a){"undefined"!==typeof console&&console.log(a,t)}return t},setDate:function(e,t){var a=e[t.property];return void 0===a?"":s()(a).format("YYYY-MM-DD HH:mm:ss")}}},g=d,h=(a("5a65"),a("2877")),f=Object(h["a"])(g,o,r,!1,null,null,null);t["default"]=f.exports},b301:function(e,t,a){"use strict";var o=a("d039");e.exports=function(e,t){var a=[][e];return!a||!o((function(){a.call(null,t||function(){throw 1},1)}))}},f181:function(e,t,a){}}]);
//# sourceMappingURL=chunk-fb743a1e.54b61667.js.map