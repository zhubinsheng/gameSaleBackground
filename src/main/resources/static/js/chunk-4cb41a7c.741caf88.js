(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4cb41a7c"],{"0c33":function(t,e,s){},"4e82":function(t,e,s){"use strict";var n=s("23e7"),o=s("1c0b"),i=s("7b0b"),a=s("d039"),r=s("b301"),c=[].sort,l=[1,2,3],u=a((function(){l.sort(void 0)})),m=a((function(){l.sort(null)})),d=r("sort"),p=u||!m||d;n({target:"Array",proto:!0,forced:p},{sort:function(t){return void 0===t?c.call(i(this)):c.call(i(this),o(t))}})},"6ad8":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"box"},[s("div",{staticClass:"aside"},[s("div",[s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"前往购物车",placement:"left"}},[s("el-button",{staticClass:"cartbtn",attrs:{type:"primary"},on:{click:function(e){return t.skipcart()}}},[s("i",{staticClass:"el-icon-shopping-cart-full"})])],1)],1),s("div",[s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"前往收藏夹",placement:"left"}},[s("el-button",{staticClass:"collectionbtn",attrs:{type:"primary"},on:{click:function(e){return t.skipfav()}}},[s("i",{staticClass:"el-icon-collection-tag"})])],1)],1),s("div",[s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"前往消息",placement:"left"}},[s("el-button",{staticClass:"cartbtn",attrs:{type:"primary"},on:{click:function(e){return t.skipmsg()}}},[s("i",{staticClass:"el-icon-chat-line-round"})])],1)],1)])])},o=[],i={inject:["reload"],data:function(){return{userId:""}},created:function(){this.userId=sessionStorage.getItem("userId")},methods:{skipcart:function(){this.$router.push({path:"/shoppingCart"})},skipfav:function(){this.$router.push({path:"/favorites"})},skipmsg:function(){this.$router.push({path:"/privatemsg"})}}},a=i,r=(s("a773"),s("2877")),c=Object(r["a"])(a,n,o,!1,null,"29c65355",null);e["a"]=c.exports},8287:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-container",[s("el-header",[s("indexheader")],1),s("el-container",[s("el-main",{staticClass:"main"},[s("hr",{staticClass:"line"}),s("div",[s("postcontent",{attrs:{postid:t.postid}})],1)]),this.userId?s("asides"):t._e()],1)],1)],1)},o=[],i=s("ae2a"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"postbox"},[s("el-row",[s("el-col",{attrs:{span:16}},[s("el-card",{staticClass:"box1"},[s("p",[s("span",{staticClass:"title"},[t._v(t._s(t.title))])]),s("div",[s("span",{staticClass:"time"},[t._v("发表于"+t._s(t.time))]),s("span",{staticStyle:{"padding-left":"450px"}},[s("i",{staticClass:"el-icon-thumb"}),t._v(" "+t._s(t.thumbs))]),s("span",{staticStyle:{"padding-left":"10px"}},[t._v("回复: "+t._s(t.reply))])]),s("hr"),s("div",{staticClass:"content"},[s("span",[t._v(t._s(t.content))])]),s("el-button",{staticClass:"btn",attrs:{disabled:t.pubol,size:"medium",type:"warning",circle:""},on:{click:function(e){return t.puthumb()}}},[s("i",{staticClass:"el-icon-thumb",staticStyle:{"font-size":"20px"}})])],1)],1),s("el-col",{attrs:{span:8}},[s("el-card",{staticClass:"box2"},[this.thisid?s("span",[s("el-avatar",{attrs:{size:60},on:{error:t.errorHandler}},[this.pimg?t._e():s("img",{attrs:{src:"https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png"},on:{click:function(e){return t.skip()}}}),this.pimg?s("img",{attrs:{src:t.pimg},on:{click:function(e){return t.skip()}}}):t._e()]),s("div",[s("span",{staticClass:"username"},[t._v(t._s(t.username))]),s("span",{staticStyle:{"padding-left":"10px"}},[s("el-button",{attrs:{size:"mini",type:"danger",circle:""},on:{click:function(e){return t.opendialog()}}},[s("i",{staticClass:"el-icon-chat-dot-square"})])],1)])],1):t._e(),this.thisid?t._e():s("h1",{staticStyle:{"padding-top":"50px",color:"red"}},[t._v("用户已经不存在")])])],1)],1),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-card",{staticClass:"box3"},[s("h3",[t._v("评论")]),s("div",{staticClass:"demo-type"},[this.userId?s("el-row",[s("el-col",{attrs:{span:3}},[s("el-avatar",{attrs:{size:60,src:t.myimg},on:{error:t.errorHandler}},[s("img",{attrs:{src:"https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png"}})])],1),s("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:21}},[s("el-input",{staticStyle:{"font-size":"20px"},attrs:{maxlength:"60",type:"textarea",rows:3,placeholder:"请输入60字以内的内容"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1),s("el-col",{attrs:{span:24}},[s("el-button",{staticStyle:{"margin-top":"10px",float:"right"},attrs:{type:"primary"},on:{click:function(e){return t.discuss()}}},[t._v("评论")])],1)],1):t._e()],1),s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.comments}},[s("el-table-column",{attrs:{prop:"title"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[s("div",[s("el-row",[s("el-col",{attrs:{span:3}},[s("el-avatar",{attrs:{size:60},on:{error:t.errorHandler}},[e.row.commentUserimg?t._e():s("img",{attrs:{src:"https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png"},on:{click:function(s){return t.skips(e.$index,e.row)}}}),e.row.commentUserimg?s("img",{attrs:{src:e.row.commentUserimg},on:{click:function(s){return t.skips(e.$index,e.row)}}}):t._e()])],1),s("el-col",{attrs:{span:8}},[e.row.userinfoName?t._e():s("span",{staticStyle:{color:"red"}},[t._v("用户已经不存在")]),e.row.userinfoName?s("span",[t._v(t._s(e.row.userinfoName))]):t._e(),s("span",{staticStyle:{"padding-left":"20px"}},[t._v("发表于"+t._s(t._f("dateFmt")(e.row.commentTime,"YYYY-MM-DD HH:mm:ss")))])])],1),s("div",[s("span",{staticClass:"commontx"},[t._v(t._s(e.row.commentContent))])])],1)])]}}])})],1)],1)],1)],1),s("div",[s("el-dialog",{attrs:{title:"私信",visible:t.msgdialog,width:"20%","before-close":t.closeDialog},on:{"update:visible":function(e){t.msgdialog=e}}},[s("el-form",{ref:"msgform",attrs:{model:t.msgform}},[s("el-form-item",{attrs:{prop:"userName"}},[s("el-input",{attrs:{autocomplete:"off",placeholder:"请输入用户名"},model:{value:t.msgform.name,callback:function(e){t.$set(t.msgform,"name",e)},expression:"msgform.name"}})],1),s("el-form-item",{attrs:{prop:"msg"}},[s("el-input",{attrs:{maxlength:"60",type:"textarea",rows:3,placeholder:"不超过60字"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send()}},model:{value:t.msgform.msg,callback:function(e){t.$set(t.msgform,"msg",e)},expression:"msgform.msg"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.send()}}},[t._v("发 送")])],1)],1)],1)],1)},r=[],c=(s("b0c0"),{props:["postid"],inject:["reload"],data:function(){return{postId:"",userId:"",thisid:"",msgdialog:!1,title:"",content:"",pubol:"",time:"",thumbs:"",reply:"",pimg:"",myimg:"",myname:"",username:"",textarea:"",comments:[{userinfoId:"",commentUserimg:"",userinfoName:"",commentTime:"",commentContent:""}],msgform:[{name:"",msg:""}]}},created:function(){this.postId=this.postid,this.userId=sessionStorage.getItem("userId"),this.loadPostData(),this.loadCommonData(),this.userId&&(this.puthumbol(),this.loadImgData()),console.log(this.comments.commentUserimg)},methods:{loadPostData:function(){var t=this,e=JSON.stringify({postId:this.postId});this.$axios.post("/post/showpostdetail",e).then((function(e){e&&200===e.status&&(t.title=e.data.postTitle,t.content=e.data.postContent,t.time=e.data.postTime,t.thumbs=e.data.postThumbs,t.reply=e.data.postCommons,t.pimg=e.data.userinfoImg,t.username=e.data.userinfoName,t.thisid=e.data.userinfoId)})).catch((function(t){return console.log("err",t),t}))},loadCommonData:function(){var t=this,e=JSON.stringify({commentPostid:this.postId});this.$axios.post("/post/showpostcommon",e).then((function(e){e&&200===e.status&&(t.comments=e.data)})).catch((function(t){return console.log("err",t),t}))},loadImgData:function(){var t=this,e=JSON.stringify({userinfoId:this.userId});this.$axios.post("/user/showuser",e).then((function(e){e&&200===e.status&&(t.myimg=e.data.userinfoImg,t.myname=e.data.userinfoName)})).catch((function(t){return console.log("err",t),t}))},puthumbol:function(){var t=this,e=JSON.stringify({puthumbPostid:this.postId,puthumbUserid:this.userId});console.log(e),this.$axios.post("/thumb/puthumbol",e).then((function(e){"success"===e.data?t.pubol=!1:"error"===e.data&&(t.pubol=!0)})).catch((function(t){return console.log("err",t),t}))},closeDialog:function(){var t=this;this.$nextTick((function(){t.msgdialog=!1,t.$refs["msgform"].resetFields()}))},puthumb:function(){var t=this,e=JSON.stringify({puthumbPostid:this.postId,puthumbUserid:this.userId});this.$axios.post("/thumb/addthumb",e).then((function(e){"success"===e.data?(t.pubol=!0,t.$message({message:"点赞成功",type:"success"}),t.reload()):"error"===e.data&&(t.pubol=!1,t.$message({message:"点赞失败",type:"error"}))})).catch((function(t){return console.log("err",t),t}))},discuss:function(){var t=this,e=JSON.stringify({commentPostname:this.title,commentUserimg:this.myimg,commentContent:this.textarea,commentUserid:this.userId,commentPostid:this.postId});this.$axios.post("/comment/insertcomment",e).then((function(e){"success"===e.data?(t.$message({message:"评论成功",type:"success"}),t.reload()):"error"===e.data&&t.$message({message:"评论失败",type:"error"})})).catch((function(t){return console.log("err",t),t}))},opendialog:function(){this.userId?(this.msgform.name=this.username,this.msgdialog=!0):this.$message({message:"请先登陆",type:"error"})},send:function(){var t=this;if(this.myname===this.msgform.name)this.$message({message:"不能和自己私信",type:"error"});else{var e=JSON.stringify({privatemsgSendid:this.userId,privatemsgSendname:this.myname,privatemsgAcceptid:this.thisid,privatemsgAcceptname:this.msgform.name,privatemsgContent:this.msgform.msg});this.$axios.post("/msg/send",e).then((function(e){e?(t.closeDialog(),t.$message({message:"发送成功",type:"success"})):(t.$message({message:"发送失败",type:"error"}),t.msgdialog=!0)})).catch((function(t){return console.log("err",t),t}))}},errorHandler:function(){return!0},skip:function(){this.thisid?this.$router.push({path:"/othersdata",query:{thisId:this.thisid}}):this.$message({message:"用户已经不存在",type:"error"})},skips:function(t,e){e.userinfoId?this.$router.push({path:"/othersdata",query:{thisId:e.userinfoId}}):this.$message({message:"用户已经不存在",type:"error"})}}}),l=c,u=(s("bf6d"),s("2877")),m=Object(u["a"])(l,a,r,!1,null,"38028d5a",null),d=m.exports,p=s("6ad8"),h={components:{indexheader:i["a"],postcontent:d,asides:p["a"]},data:function(){return{postid:"",userId:""}},created:function(){this.userId=sessionStorage.getItem("userId"),this.getPostid()},methods:{getPostid:function(){this.$route.query&&(this.postid=this.$route.query.postid)}}},f=h,g=(s("f8ab"),Object(u["a"])(f,n,o,!1,null,"747e8f7a",null));e["default"]=g.exports},"86c4":function(t,e,s){},a773:function(t,e,s){"use strict";var n=s("b3f3"),o=s.n(n);o.a},ae2a:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",{staticClass:"row",attrs:{gutter:21}},[s("el-col",{attrs:{span:3}},[s("el-image",{staticStyle:{width:"100px",height:"50px","padding-top":"5px"},attrs:{src:t.url,fit:"contain"}})],1),s("el-col",{attrs:{span:6}},[s("el-menu",{attrs:{router:"","default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelect}},[s("el-menu-item",{attrs:{index:"/index"}},[t._v("首页")]),s("el-submenu",{attrs:{index:"2"}},[s("template",{slot:"title"},[t._v("游戏")]),t._l(t.sort,(function(e,n){return s("el-menu-item",{key:n,on:{click:function(e){return t.jump(n)}}},[t._v(t._s(e.sortName))])})),s("hr"),s("el-menu-item",{attrs:{index:"/allgame"}},[t._v("查看所有游戏")])],2),s("el-menu-item",{attrs:{index:"/community"}},[t._v("社区")])],1)],1),s("el-col",{attrs:{span:6}},[s("el-input",{staticClass:"sel",attrs:{placeholder:"请输入关键字"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()}},model:{value:t.sel,callback:function(e){t.sel=e},expression:"sel"}})],1),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"selbtn"},[s("el-button",{attrs:{type:"primary",icon:"el-icon-search",plain:""},on:{click:function(e){return t.search()}}},[t._v("搜索")])],1)]),s("el-col",{attrs:{span:5}},[t.loginbol?t._e():s("div",{staticStyle:{"padding-top":"10px"}},[s("el-button",{attrs:{type:"text"},on:{click:function(e){return t.out()}}},[t._v("登陆注册")])],1),t.loginbol?s("div",{staticClass:"demo-type"},[s("el-popover",{staticClass:"popover",attrs:{placement:"top-start",trigger:"hover"}},[s("el-avatar",{attrs:{slot:"reference",size:"medium",plain:!0},on:{error:t.errorHandler},slot:"reference"},[t.loginbol?t._e():s("img",{attrs:{src:"https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png"},on:{click:function(e){return t.skips()}}}),t.loginbol?s("img",{attrs:{src:t.userpic},on:{click:function(e){return t.skips()}}}):t._e()]),t.loginbol?s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.toMydata()}}},[t._v("个人中心")]):t._e(),s("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.out()}}},[t.loginbol?s("span",[t._v("登出")]):t._e()])],1)],1):t._e()])],1)},o=[],i=(s("4e82"),s("b640")),a=s.n(i),r={data:function(){return{url:a.a,activeIndex:"/index",sel:"",userpic:"https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png",userId:"",msgs:"",thisName:"",refash:!1,loginbol:!1,sort:[{sortName:""}]}},created:function(){this.userId=sessionStorage.getItem("userId"),this.loadSort(),this.loadAvatar(),this.loadMsgData()},mounted:function(){var t=this,e=setInterval((function(){t.loadMsgData2(),t.refash&&t.ShowMsg()}),3e3);this.$once("hook:beforeDestroy",(function(){clearInterval(e)}))},methods:{loadAvatar:function(){var t=this,e=JSON.stringify({userinfoId:this.userId});this.$axios.post("/user/showuser",e).then((function(e){e.data?(e.data.userinfoImg&&(t.userpic=e.data.userinfoImg),t.loginbol=!0):t.loginbol=!1})).catch((function(t){return console.log("err",t),t}))},loadSort:function(){var t=this;this.$axios.post("/sort/showsort").then((function(e){e&&(t.sort=e.data)})).catch((function(t){return console.log("err",t),t}))},loadMsgData:function(){var t=this,e=JSON.stringify({privatemsgAcceptid:this.userId});this.$axios.post("/msg/refreshmsg",e).then((function(e){e&&t.msgs!==e.data.privatemsgContent&&(t.msgs=e.data.privatemsgContent,t.thisName=e.data.privatemsgSendname)})).catch((function(t){return console.log("err",t),t}))},loadMsgData2:function(){var t=this,e=JSON.stringify({privatemsgAcceptid:this.userId});this.$axios.post("/msg/refreshmsg",e).then((function(e){e&&(t.msgs!==e.data.privatemsgContent?(t.msgs=e.data.privatemsgContent,t.thisName=e.data.privatemsgSendname,t.refash=!0):t.refash=!1)})).catch((function(t){return console.log("err",t),t}))},ShowMsg:function(){this.$notify({title:this.thisName,iconClass:"el-icon-chat-dot-round",message:this.msgs})},handleSelect:function(t,e){console.log(t,e)},out:function(){this.$router.push({path:"/us_login"}),sessionStorage.removeItem("userId")},search:function(){this.$router.push({path:"/selgame",query:{sel:this.sel}})},errorHandler:function(){return!0},jump:function(t){this.$router.push({path:"/allgame",query:{sortname:this.sort[t].sortName}})},skips:function(){this.loginbol?this.$router.push({path:"/othersdata",query:{thisId:this.userId}}):this.$message.error("请先登陆")},toMydata:function(){this.loginbol?this.$router.push({path:"/mydata"}):this.$message.error("请先登陆")}}},c=r,l=(s("c382"),s("2877")),u=Object(l["a"])(c,n,o,!1,null,null,null);e["a"]=u.exports},b0c0:function(t,e,s){var n=s("83ab"),o=s("9bf2").f,i=Function.prototype,a=i.toString,r=/^\s*function ([^ (]*)/,c="name";!n||c in i||o(i,c,{configurable:!0,get:function(){try{return a.call(this).match(r)[1]}catch(t){return""}}})},b301:function(t,e,s){"use strict";var n=s("d039");t.exports=function(t,e){var s=[][t];return!s||!n((function(){s.call(null,e||function(){throw 1},1)}))}},b3f3:function(t,e,s){},b640:function(t,e,s){t.exports=s.p+"img/logo.78c810f6.jpg"},bf6d:function(t,e,s){"use strict";var n=s("86c4"),o=s.n(n);o.a},c382:function(t,e,s){"use strict";var n=s("0c33"),o=s.n(n);o.a},c618:function(t,e,s){},f8ab:function(t,e,s){"use strict";var n=s("c618"),o=s.n(n);o.a}}]);
//# sourceMappingURL=chunk-4cb41a7c.741caf88.js.map